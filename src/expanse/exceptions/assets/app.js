var vt=Object.defineProperty;var Ot=(s,e,t)=>e in s?vt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var xe=(s,e,t)=>(Ot(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();class Et{constructor(e,t,n){this.eventTarget=e,this.eventName=t,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=wt(e);for(const n of this.bindings){if(t.immediatePropagationStopped)break;n.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{const n=e.index,r=t.index;return n<r?-1:n>r?1:0})}}function wt(s){if("immediatePropagationStopped"in s)return s;{const{stopImmediatePropagation:e}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}class At{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,n={}){this.application.handleError(e,`Error ${t}`,n)}clearEventListenersForBinding(e){const t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){const{eventTarget:t,eventName:n,eventOptions:r}=e,i=this.fetchEventListenerMapForEventTarget(t),a=this.cacheKey(n,r);i.delete(a),i.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:n,eventOptions:r}=e;return this.fetchEventListener(t,n,r)}fetchEventListener(e,t,n){const r=this.fetchEventListenerMapForEventTarget(e),i=this.cacheKey(t,n);let a=r.get(i);return a||(a=this.createEventListener(e,t,n),r.set(i,a)),a}createEventListener(e,t,n){const r=new Et(e,t,n);return this.started&&r.connect(),r}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const n=[e];return Object.keys(t).sort().forEach(r=>{n.push(`${t[r]?"":"!"}${r}`)}),n.join(":")}}const Mt={stop({event:s,value:e}){return e&&s.stopPropagation(),!0},prevent({event:s,value:e}){return e&&s.preventDefault(),!0},self({event:s,value:e,element:t}){return e?t===s.target:!0}},Tt=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Ct(s){const t=s.trim().match(Tt)||[];let n=t[2],r=t[3];return r&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${r}`,r=""),{eventTarget:Ft(t[4]),eventName:n,eventOptions:t[7]?kt(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||r}}function Ft(s){if(s=="window")return window;if(s=="document")return document}function kt(s){return s.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function St(s){if(s==window)return"window";if(s==document)return"document"}function Te(s){return s.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function be(s){return Te(s.replace(/--/g,"-").replace(/__/g,"_"))}function ee(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Je(s){return s.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function xt(s){return s.match(/[^\s]+/g)||[]}function Le(s){return s!=null}function ve(s,e){return Object.prototype.hasOwnProperty.call(s,e)}const De=["meta","ctrl","alt","shift"];class Lt{constructor(e,t,n,r){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||Dt(e)||ne("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||ne("missing identifier"),this.methodName=n.methodName||ne("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=r}static forToken(e,t){return new this(e.element,e.index,Ct(e.content),t)}toString(){const e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;const t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;const n=t.filter(r=>!De.includes(r))[0];return n?(ve(this.keyMappings,n)||ne(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[n].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;const t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){const e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:n,value:r}of Array.from(this.element.attributes)){const i=n.match(t),a=i&&i[1];a&&(e[Te(a)]=Bt(r))}return e}get eventTargetName(){return St(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){const[n,r,i,a]=De.map(o=>t.includes(o));return e.metaKey!==n||e.ctrlKey!==r||e.altKey!==i||e.shiftKey!==a}}const Be={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function Dt(s){const e=s.tagName.toLowerCase();if(e in Be)return Be[e](s)}function ne(s){throw new Error(s)}function Bt(s){try{return JSON.parse(s)}catch{return s}}class Nt{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){const t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){const{element:t}=this.action,{actionDescriptorFilters:n}=this.context.application,{controller:r}=this.context;let i=!0;for(const[a,o]of Object.entries(this.eventOptions))if(a in n){const c=n[a];i=i&&c({name:a,value:o,event:e,element:t,controller:r})}else continue;return i}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){const{target:t,currentTarget:n}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:n,action:this.methodName})}catch(r){const{identifier:i,controller:a,element:o,index:c}=this,f={identifier:i,controller:a,element:o,index:c,event:e};this.context.handleError(r,`invoking action "${this.action}"`,f)}}willBeInvokedByEvent(e){const t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class Ge{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(const t of Array.from(e)){const n=this.elementFromNode(t);n&&this.processTree(n,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const n=this.elementFromNode(t);n&&this.elementIsActive(n)&&this.processTree(n,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const n of this.matchElementsInTree(e))t.call(this,n)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class Xe{constructor(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new Ge(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}function $t(s,e,t){Ze(s,e).add(t)}function Kt(s,e,t){Ze(s,e).delete(t),Vt(s,e)}function Ze(s,e){let t=s.get(e);return t||(t=new Set,s.set(e,t)),t}function Vt(s,e){const t=s.get(e);t!=null&&t.size==0&&s.delete(e)}class _{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,n)=>t.concat(Array.from(n)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,n)=>t+n.size,0)}add(e,t){$t(this.valuesByKey,e,t)}delete(e,t){Kt(this.valuesByKey,e,t)}has(e,t){const n=this.valuesByKey.get(e);return n!=null&&n.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(n=>n.has(e))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,n])=>n.has(e)).map(([t,n])=>t)}}class jt{constructor(e,t,n,r){this._selector=t,this.details=r,this.elementObserver=new Ge(e,this),this.delegate=n,this.matchesByElement=new _}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){const{selector:t}=this;if(t){const n=e.matches(t);return this.delegate.selectorMatchElement?n&&this.delegate.selectorMatchElement(e,this.details):n}else return!1}matchElementsInTree(e){const{selector:t}=this;if(t){const n=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(t)).filter(i=>this.matchElement(i));return n.concat(r)}else return[]}elementMatched(e){const{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){const t=this.matchesByElement.getKeysForValue(e);for(const n of t)this.selectorUnmatched(e,n)}elementAttributeChanged(e,t){const{selector:n}=this;if(n){const r=this.matchElement(e),i=this.matchesByElement.has(n,e);r&&!i?this.selectorMatched(e,n):!r&&i&&this.selectorUnmatched(e,n)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}}class It{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const n=this.delegate.getStringMapKeyForAttribute(e);if(n!=null){this.stringMap.has(e)||this.stringMapKeyAdded(n,e);const r=this.element.getAttribute(e);if(this.stringMap.get(e)!=r&&this.stringMapValueChanged(r,n,t),r==null){const i=this.stringMap.get(e);this.stringMap.delete(e),i&&this.stringMapKeyRemoved(n,e,i)}else this.stringMap.set(e,r)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,n)}stringMapKeyRemoved(e,t,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class Qe{constructor(e,t,n){this.attributeObserver=new Xe(e,t,this),this.delegate=n,this.tokensByElement=new _}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,n]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(n)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),n=this.readTokensForElement(e),r=_t(t,n).findIndex(([i,a])=>!Rt(i,a));return r==-1?[[],[]]:[t.slice(r),n.slice(r)]}readTokensForElement(e){const t=this.attributeName,n=e.getAttribute(t)||"";return Pt(n,e,t)}}function Pt(s,e,t){return s.trim().split(/\s+/).filter(n=>n.length).map((n,r)=>({element:e,attributeName:t,content:n,index:r}))}function _t(s,e){const t=Math.max(s.length,e.length);return Array.from({length:t},(n,r)=>[s[r],e[r]])}function Rt(s,e){return s&&e&&s.index==e.index&&s.content==e.content}class Ye{constructor(e,t,n){this.tokenListObserver=new Qe(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))}tokenUnmatched(e){const{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}}class Ut{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Ye(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new Nt(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){const t=Lt.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class zt{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new It(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const n=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,n.writer(this.receiver[e]),n.writer(n.defaultValue))}stringMapValueChanged(e,t,n){const r=this.valueDescriptorNameMap[t];e!==null&&(n===null&&(n=r.writer(r.defaultValue)),this.invokeChangedCallback(t,e,n))}stringMapKeyRemoved(e,t,n){const r=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,r.writer(this.receiver[e]),n):this.invokeChangedCallback(e,r.writer(r.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:n,writer:r}of this.valueDescriptors)n!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,r(n),void 0)}invokeChangedCallback(e,t,n){const r=`${e}Changed`,i=this.receiver[r];if(typeof i=="function"){const a=this.valueDescriptorNameMap[e];try{const o=a.reader(t);let c=n;n&&(c=a.reader(n)),i.call(this.receiver,o,c)}catch(o){throw o instanceof TypeError&&(o.message=`Stimulus Value "${this.context.identifier}.${a.name}" - ${o.message}`),o}}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{const n=this.valueDescriptorMap[t];e[n.name]=n}),e}hasValue(e){const t=this.valueDescriptorNameMap[e],n=`has${ee(t.name)}`;return this.receiver[n]}}class qt{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new _}start(){this.tokenListObserver||(this.tokenListObserver=new Qe(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var n;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var n;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function te(s,e){const t=et(s);return Array.from(t.reduce((n,r)=>(Ht(r,e).forEach(i=>n.add(i)),n),new Set))}function Wt(s,e){return et(s).reduce((n,r)=>(n.push(...Jt(r,e)),n),[])}function et(s){const e=[];for(;s;)e.push(s),s=Object.getPrototypeOf(s);return e.reverse()}function Ht(s,e){const t=s[e];return Array.isArray(t)?t:[]}function Jt(s,e){const t=s[e];return t?Object.keys(t).map(n=>[n,t[n]]):[]}class Gt{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new _,this.outletElementsByName=new _,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:n}){const r=this.getOutlet(e,n);r&&this.connectOutlet(r,e,n)}selectorUnmatched(e,t,{outletName:n}){const r=this.getOutletFromMap(e,n);r&&this.disconnectOutlet(r,e,n)}selectorMatchElement(e,{outletName:t}){const n=this.selector(t),r=this.hasOutlet(e,t),i=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return n?r&&i&&e.matches(n):!1}elementMatchedAttribute(e,t){const n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}elementAttributeValueChanged(e,t){const n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}elementUnmatchedAttribute(e,t){const n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}connectOutlet(e,t,n){var r;this.outletElementsByName.has(n,t)||(this.outletsByName.add(n,e),this.outletElementsByName.add(n,t),(r=this.selectorObserverMap.get(n))===null||r===void 0||r.pause(()=>this.delegate.outletConnected(e,t,n)))}disconnectOutlet(e,t,n){var r;this.outletElementsByName.has(n,t)&&(this.outletsByName.delete(n,e),this.outletElementsByName.delete(n,t),(r=this.selectorObserverMap.get(n))===null||r===void 0||r.pause(()=>this.delegate.outletDisconnected(e,t,n)))}disconnectAllOutlets(){for(const e of this.outletElementsByName.keys)for(const t of this.outletElementsByName.getValuesForKey(e))for(const n of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(n,t,e)}updateSelectorObserverForOutlet(e){const t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){const t=this.selector(e),n=new jt(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,n),n.start()}setupAttributeObserverForOutlet(e){const t=this.attributeNameForOutletName(e),n=new Xe(this.scope.element,t,this);this.attributeObserverMap.set(e,n),n.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){const e=new _;return this.router.modules.forEach(t=>{const n=t.definition.controllerConstructor;te(n,"outlets").forEach(i=>e.add(i,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(n=>n.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class Xt{constructor(e,t){this.logDebugActivity=(n,r={})=>{const{identifier:i,controller:a,element:o}=this;r=Object.assign({identifier:i,controller:a,element:o},r),this.application.logDebugActivity(this.identifier,n,r)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new Ut(this,this.dispatcher),this.valueObserver=new zt(this,this.controller),this.targetObserver=new qt(this,this),this.outletObserver=new Gt(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(n){this.handleError(n,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,n={}){const{identifier:r,controller:i,element:a}=this;n=Object.assign({identifier:r,controller:i,element:a},n),this.application.handleError(e,`Error ${t}`,n)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,n){this.invokeControllerMethod(`${be(n)}OutletConnected`,e,t)}outletDisconnected(e,t,n){this.invokeControllerMethod(`${be(n)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){const n=this.controller;typeof n[e]=="function"&&n[e](...t)}}function Zt(s){return Qt(s,Yt(s))}function Qt(s,e){const t=ns(s),n=es(s.prototype,e);return Object.defineProperties(t.prototype,n),t}function Yt(s){return te(s,"blessings").reduce((t,n)=>{const r=n(s);for(const i in r){const a=t[i]||{};t[i]=Object.assign(a,r[i])}return t},{})}function es(s,e){return ss(e).reduce((t,n)=>{const r=ts(s,e,n);return r&&Object.assign(t,{[n]:r}),t},{})}function ts(s,e,t){const n=Object.getOwnPropertyDescriptor(s,t);if(!(n&&"value"in n)){const i=Object.getOwnPropertyDescriptor(e,t).value;return n&&(i.get=n.get||i.get,i.set=n.set||i.set),i}}const ss=(()=>typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames)(),ns=(()=>{function s(t){function n(){return Reflect.construct(t,arguments,new.target)}return n.prototype=Object.create(t.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,t),n}function e(){const n=s(function(){this.a.call(this)});return n.prototype.a=function(){},new n}try{return e(),s}catch{return n=>class extends n{}}})();function rs(s){return{identifier:s.identifier,controllerConstructor:Zt(s.controllerConstructor)}}class is{constructor(e,t){this.application=e,this.definition=rs(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new Xt(this,e),this.contextsByScope.set(e,t)),t}}class os{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){const t=this.data.get(this.getDataKey(e))||"";return xt(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class as{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Je(e)}`}}class cs{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,n){let r=this.warnedKeysByObject.get(e);r||(r=new Set,this.warnedKeysByObject.set(e,r)),r.has(t)||(r.add(t),this.logger.warn(n,e))}}function Oe(s,e){return`[${s}~="${e}"]`}class ls{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,n)=>t||this.findTarget(n)||this.findLegacyTarget(n),void 0)}findAll(...e){return e.reduce((t,n)=>[...t,...this.findAllTargets(n),...this.findAllLegacyTargets(n)],[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){const t=this.schema.targetAttributeForScope(this.identifier);return Oe(t,e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(n=>this.deprecate(n,e))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return Oe(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:n}=this,r=this.schema.targetAttribute,i=this.schema.targetAttributeForScope(n);this.guide.warn(e,`target:${t}`,`Please replace ${r}="${n}.${t}" with ${i}="${t}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class us{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,n)=>t||this.findOutlet(n),void 0)}findAll(...e){return e.reduce((t,n)=>[...t,...this.findAllOutlets(n)],[])}getSelectorForOutletName(e){const t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){const t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){const t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))}matchesElement(e,t,n){const r=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&r.split(" ").includes(n)}}class Ce{constructor(e,t,n,r){this.targets=new ls(this),this.classes=new os(this),this.data=new as(this),this.containsElement=i=>i.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=n,this.guide=new cs(r),this.outlets=new us(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return Oe(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new Ce(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class hs{constructor(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new Ye(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:n}=e;return this.parseValueForElementAndIdentifier(t,n)}parseValueForElementAndIdentifier(e,t){const n=this.fetchScopesByIdentifierForElement(e);let r=n.get(t);return r||(r=this.delegate.createScopeForElementAndIdentifier(e,t),n.set(t,r)),r}elementMatchedValue(e,t){const n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),n==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),n==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class ds{constructor(e){this.application=e,this.scopeObserver=new hs(this.element,this.schema,this),this.scopesByIdentifier=new _,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new is(this.application,e);this.connectModule(t);const n=e.controllerConstructor.afterLoad;n&&n.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find(r=>r.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){const n=this.scopeObserver.parseValueForElementAndIdentifier(e,t);n?this.scopeObserver.elementMatchedValue(n.element,n):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,n){this.application.handleError(e,t,n)}createScopeForElementAndIdentifier(e,t){return new Ce(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(n=>e.connectContextForScope(n))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(n=>e.disconnectContextForScope(n))}}const fs={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,e)=>`data-${s}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Ne("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),Ne("0123456789".split("").map(s=>[s,s])))};function Ne(s){return s.reduce((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n}),{})}class ps{constructor(e=document.documentElement,t=fs){this.logger=console,this.debug=!1,this.logDebugActivity=(n,r,i={})=>{this.debug&&this.logFormattedMessage(n,r,i)},this.element=e,this.schema=t,this.dispatcher=new At(this),this.router=new ds(this),this.actionDescriptorFilters=Object.assign({},Mt)}static start(e,t){const n=new this(e,t);return n.start(),n}async start(){await gs(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>{r.controllerConstructor.shouldLoad&&this.router.loadDefinition(r)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>this.router.unloadIdentifier(r))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){const n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null}handleError(e,t,n){var r;this.logger.error(`%s

%o

%o`,t,e,n),(r=window.onerror)===null||r===void 0||r.call(window,t,"",0,0,e)}logFormattedMessage(e,t,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}}function gs(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function ms(s){return te(s,"classes").reduce((t,n)=>Object.assign(t,ys(n)),{})}function ys(s){return{[`${s}Class`]:{get(){const{classes:e}=this;if(e.has(s))return e.get(s);{const t=e.getAttributeName(s);throw new Error(`Missing attribute "${t}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${ee(s)}Class`]:{get(){return this.classes.has(s)}}}}function bs(s){return te(s,"outlets").reduce((t,n)=>Object.assign(t,vs(n)),{})}function $e(s,e,t){return s.application.getControllerForElementAndIdentifier(e,t)}function Ke(s,e,t){let n=$e(s,e,t);if(n||(s.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),n=$e(s,e,t),n))return n}function vs(s){const e=be(s);return{[`${e}Outlet`]:{get(){const t=this.outlets.find(s),n=this.outlets.getSelectorForOutletName(s);if(t){const r=Ke(this,t,s);if(r)return r;throw new Error(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}Outlets`]:{get(){const t=this.outlets.findAll(s);return t.length>0?t.map(n=>{const r=Ke(this,n,s);if(r)return r;console.warn(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`,n)}).filter(n=>n):[]}},[`${e}OutletElement`]:{get(){const t=this.outlets.find(s),n=this.outlets.getSelectorForOutletName(s);if(t)return t;throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${ee(e)}Outlet`]:{get(){return this.outlets.has(s)}}}}function Os(s){return te(s,"targets").reduce((t,n)=>Object.assign(t,Es(n)),{})}function Es(s){return{[`${s}Target`]:{get(){const e=this.targets.find(s);if(e)return e;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${ee(s)}Target`]:{get(){return this.targets.has(s)}}}}function ws(s){const e=Wt(s,"values"),t={valueDescriptorMap:{get(){return e.reduce((n,r)=>{const i=tt(r,this.identifier),a=this.data.getAttributeNameForKey(i.key);return Object.assign(n,{[a]:i})},{})}}};return e.reduce((n,r)=>Object.assign(n,As(r)),t)}function As(s,e){const t=tt(s,e),{key:n,name:r,reader:i,writer:a}=t;return{[r]:{get(){const o=this.data.get(n);return o!==null?i(o):t.defaultValue},set(o){o===void 0?this.data.delete(n):this.data.set(n,a(o))}},[`has${ee(r)}`]:{get(){return this.data.has(n)||t.hasCustomDefaultValue}}}}function tt([s,e],t){return Fs({controller:t,token:s,typeDefinition:e})}function oe(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function X(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function Ms(s){const{controller:e,token:t,typeObject:n}=s,r=Le(n.type),i=Le(n.default),a=r&&i,o=r&&!i,c=!r&&i,f=oe(n.type),h=X(s.typeObject.default);if(o)return f;if(c)return h;if(f!==h){const u=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${u}" must match the defined type "${f}". The provided default value of "${n.default}" is of type "${h}".`)}if(a)return f}function Ts(s){const{controller:e,token:t,typeDefinition:n}=s,i=Ms({controller:e,token:t,typeObject:n}),a=X(n),o=oe(n),c=i||a||o;if(c)return c;const f=e?`${e}.${n}`:t;throw new Error(`Unknown value type "${f}" for "${t}" value`)}function Cs(s){const e=oe(s);if(e)return Ve[e];const t=ve(s,"default"),n=ve(s,"type"),r=s;if(t)return r.default;if(n){const{type:i}=r,a=oe(i);if(a)return Ve[a]}return s}function Fs(s){const{token:e,typeDefinition:t}=s,n=`${Je(e)}-value`,r=Ts(s);return{type:r,key:n,name:Te(n),get defaultValue(){return Cs(t)},get hasCustomDefaultValue(){return X(t)!==void 0},reader:ks[r],writer:je[r]||je.default}}const Ve={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},ks={array(s){const e=JSON.parse(s);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${X(e)}"`);return e},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s.replace(/_/g,""))},object(s){const e=JSON.parse(s);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${X(e)}"`);return e},string(s){return s}},je={default:Ss,array:Ie,object:Ie};function Ie(s){return JSON.stringify(s)}function Ss(s){return`${s}`}class L{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:n={},prefix:r=this.identifier,bubbles:i=!0,cancelable:a=!0}={}){const o=r?`${r}:${e}`:e,c=new CustomEvent(o,{detail:n,bubbles:i,cancelable:a});return t.dispatchEvent(c),c}}L.blessings=[ms,Os,ws,bs];L.targets=[];L.outlets=[];L.values={};const de=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function fe(s,e,t,n){s.addEventListener?s.addEventListener(e,t,n):s.attachEvent&&s.attachEvent("on".concat(e),t)}function W(s,e,t,n){s.removeEventListener?s.removeEventListener(e,t,n):s.detachEvent&&s.detachEvent("on".concat(e),t)}function st(s,e){const t=e.slice(0,e.length-1);for(let n=0;n<t.length;n++)t[n]=s[t[n].toLowerCase()];return t}function nt(s){typeof s!="string"&&(s=""),s=s.replace(/\s/g,"");const e=s.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function xs(s,e){const t=s.length>=e.length?s:e,n=s.length>=e.length?e:s;let r=!0;for(let i=0;i<t.length;i++)n.indexOf(t[i])===-1&&(r=!1);return r}const Z={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":de?173:189,"=":de?61:187,";":de?59:186,"'":222,"[":219,"]":221,"\\":220},x={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Ee={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},E={16:!1,18:!1,17:!1,91:!1},b={};for(let s=1;s<20;s++)Z["f".concat(s)]=111+s;let y=[],J=null,rt="all";const $=new Map,se=s=>Z[s.toLowerCase()]||x[s.toLowerCase()]||s.toUpperCase().charCodeAt(0),Ls=s=>Object.keys(Z).find(e=>Z[e]===s),Ds=s=>Object.keys(x).find(e=>x[e]===s);function it(s){rt=s||"all"}function Q(){return rt||"all"}function Bs(){return y.slice(0)}function Ns(){return y.map(s=>Ls(s)||Ds(s)||String.fromCharCode(s))}function $s(){const s=[];return Object.keys(b).forEach(e=>{b[e].forEach(t=>{let{key:n,scope:r,mods:i,shortcut:a}=t;s.push({scope:r,shortcut:a,mods:i,keys:n.split("+").map(o=>se(o))})})}),s}function Ks(s){const e=s.target||s.srcElement,{tagName:t}=e;let n=!0;const r=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(r||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(n=!1),n}function Vs(s){return typeof s=="string"&&(s=se(s)),y.indexOf(s)!==-1}function js(s,e){let t,n;s||(s=Q());for(const r in b)if(Object.prototype.hasOwnProperty.call(b,r))for(t=b[r],n=0;n<t.length;)t[n].scope===s?t.splice(n,1).forEach(a=>{let{element:o}=a;return Fe(o)}):n++;Q()===s&&it(e||"all")}function Is(s){let e=s.keyCode||s.which||s.charCode;const t=y.indexOf(e);if(t>=0&&y.splice(t,1),s.key&&s.key.toLowerCase()==="meta"&&y.splice(0,y.length),(e===93||e===224)&&(e=91),e in E){E[e]=!1;for(const n in x)x[n]===e&&(j[n]=!1)}}function ot(s){if(typeof s>"u")Object.keys(b).forEach(r=>{Array.isArray(b[r])&&b[r].forEach(i=>re(i)),delete b[r]}),Fe(null);else if(Array.isArray(s))s.forEach(r=>{r.key&&re(r)});else if(typeof s=="object")s.key&&re(s);else if(typeof s=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];let[r,i]=t;typeof r=="function"&&(i=r,r=""),re({key:s,scope:r,method:i,splitKey:"+"})}}const re=s=>{let{key:e,scope:t,method:n,splitKey:r="+"}=s;nt(e).forEach(a=>{const o=a.split(r),c=o.length,f=o[c-1],h=f==="*"?"*":se(f);if(!b[h])return;t||(t=Q());const u=c>1?st(x,o):[],l=[];b[h]=b[h].filter(m=>{const O=(n?m.method===n:!0)&&m.scope===t&&xs(m.mods,u);return O&&l.push(m.element),!O}),l.forEach(m=>Fe(m))})};function Pe(s,e,t,n){if(e.element!==n)return;let r;if(e.scope===t||e.scope==="all"){r=e.mods.length>0;for(const i in E)Object.prototype.hasOwnProperty.call(E,i)&&(!E[i]&&e.mods.indexOf(+i)>-1||E[i]&&e.mods.indexOf(+i)===-1)&&(r=!1);(e.mods.length===0&&!E[16]&&!E[18]&&!E[17]&&!E[91]||r||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(y),e.method(s,e)===!1&&(s.preventDefault?s.preventDefault():s.returnValue=!1,s.stopPropagation&&s.stopPropagation(),s.cancelBubble&&(s.cancelBubble=!0)))}}function _e(s,e){const t=b["*"];let n=s.keyCode||s.which||s.charCode;if(!j.filter.call(this,s))return;if((n===93||n===224)&&(n=91),y.indexOf(n)===-1&&n!==229&&y.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach(o=>{const c=Ee[o];s[o]&&y.indexOf(c)===-1?y.push(c):!s[o]&&y.indexOf(c)>-1?y.splice(y.indexOf(c),1):o==="metaKey"&&s[o]&&y.length===3&&(s.ctrlKey||s.shiftKey||s.altKey||(y=y.slice(y.indexOf(c))))}),n in E){E[n]=!0;for(const o in x)x[o]===n&&(j[o]=!0);if(!t)return}for(const o in E)Object.prototype.hasOwnProperty.call(E,o)&&(E[o]=s[Ee[o]]);s.getModifierState&&!(s.altKey&&!s.ctrlKey)&&s.getModifierState("AltGraph")&&(y.indexOf(17)===-1&&y.push(17),y.indexOf(18)===-1&&y.push(18),E[17]=!0,E[18]=!0);const r=Q();if(t)for(let o=0;o<t.length;o++)t[o].scope===r&&(s.type==="keydown"&&t[o].keydown||s.type==="keyup"&&t[o].keyup)&&Pe(s,t[o],r,e);if(!(n in b))return;const i=b[n],a=i.length;for(let o=0;o<a;o++)if((s.type==="keydown"&&i[o].keydown||s.type==="keyup"&&i[o].keyup)&&i[o].key){const c=i[o],{splitKey:f}=c,h=c.key.split(f),u=[];for(let l=0;l<h.length;l++)u.push(se(h[l]));u.sort().join("")===y.sort().join("")&&Pe(s,c,r,e)}}function j(s,e,t){y=[];const n=nt(s);let r=[],i="all",a=document,o=0,c=!1,f=!0,h="+",u=!1,l=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(a=e.element),e.keyup&&(c=e.keyup),e.keydown!==void 0&&(f=e.keydown),e.capture!==void 0&&(u=e.capture),typeof e.splitKey=="string"&&(h=e.splitKey),e.single===!0&&(l=!0)),typeof e=="string"&&(i=e),l&&ot(s,i);o<n.length;o++)s=n[o].split(h),r=[],s.length>1&&(r=st(x,s)),s=s[s.length-1],s=s==="*"?"*":se(s),s in b||(b[s]=[]),b[s].push({keyup:c,keydown:f,scope:i,mods:r,shortcut:n[o],method:t,key:n[o],splitKey:h,element:a});if(typeof a<"u"&&window){if(!$.has(a)){const m=function(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return _e(O,a)},v=function(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;_e(O,a),Is(O)};$.set(a,{keydownListener:m,keyupListenr:v,capture:u}),fe(a,"keydown",m,u),fe(a,"keyup",v,u)}if(!J){const m=()=>{y=[]};J={listener:m,capture:u},fe(window,"focus",m,u)}}}function Ps(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(b).forEach(t=>{b[t].filter(r=>r.scope===e&&r.shortcut===s).forEach(r=>{r&&r.method&&r.method()})})}function Fe(s){const e=Object.values(b).flat();if(e.findIndex(n=>{let{element:r}=n;return r===s})<0){const{keydownListener:n,keyupListenr:r,capture:i}=$.get(s)||{};n&&r&&(W(s,"keyup",r,i),W(s,"keydown",n,i),$.delete(s))}if((e.length<=0||$.size<=0)&&(Object.keys($).forEach(r=>{const{keydownListener:i,keyupListenr:a,capture:o}=$.get(r)||{};i&&a&&(W(r,"keyup",a,o),W(r,"keydown",i,o),$.delete(r))}),$.clear(),Object.keys(b).forEach(r=>delete b[r]),J)){const{listener:r,capture:i}=J;W(window,"focus",r,i),J=null}}const pe={getPressedKeyString:Ns,setScope:it,getScope:Q,deleteScope:js,getPressedKeyCodes:Bs,getAllKeyCodes:$s,isPressed:Vs,filter:Ks,trigger:Ps,unbind:ot,keyMap:Z,modifier:x,modifierMap:Ee};for(const s in pe)Object.prototype.hasOwnProperty.call(pe,s)&&(j[s]=pe[s]);if(typeof window<"u"){const s=window.hotkeys;j.noConflict=e=>(e&&window.hotkeys===j&&(window.hotkeys=s),j),window.hotkeys=j}const _s=(s,e,t)=>{let n=s;return t===!0?n=`${e.identifier}:${s}`:typeof t=="string"&&(n=`${t}:${s}`),n},Rs=(s,e,t)=>{const{bubbles:n,cancelable:r,composed:i}=e||{bubbles:!0,cancelable:!0,composed:!0};return e&&Object.assign(t,{originalEvent:e}),new CustomEvent(s,{bubbles:n,cancelable:r,composed:i,detail:t})};function Us(s){const e=s.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,r=e.top<=t&&e.top+e.height>=0,i=e.left<=n&&e.left+e.width>=0;return r&&i}const zs={events:["click","touchend"],onlyVisible:!0,dispatchEvent:!0,eventPrefix:!0},qs=(s,e={})=>{const{onlyVisible:t,dispatchEvent:n,events:r,eventPrefix:i}=Object.assign({},zs,e),a=h=>{const u=(e==null?void 0:e.element)||s.element;if(!(u.contains(h.target)||!Us(u)&&t)&&(s.clickOutside&&s.clickOutside(h),n)){const l=_s("click:outside",s,i),m=Rs(l,h,{controller:s});u.dispatchEvent(m)}},o=()=>{r==null||r.forEach(h=>{window.addEventListener(h,a,!1)})},c=()=>{r==null||r.forEach(h=>{window.removeEventListener(h,a,!1)})},f=s.disconnect.bind(s);return Object.assign(s,{disconnect(){c(),f()}}),o(),[o,c]};class Ws extends L{}class Hs extends Ws{constructor(e){super(e),requestAnimationFrame(()=>{const[t,n]=qs(this,this.options);Object.assign(this,{observe:t,unobserve:n})})}}class Js extends L{}Js.debounces=[];class Gs extends L{}Gs.throttles=[];const Xs={enterFromClass:"enter",enterActiveClass:"enterStart",enterToClass:"enterEnd",leaveFromClass:"leave",leaveActiveClass:"leaveStart",leaveToClass:"leaveEnd"},Zs={transitioned:!1,hiddenClass:"hidden",preserveOriginalClass:!0,removeToClasses:!0},Qs=(s,e={})=>{var t,n,r;const i=s.element.dataset.transitionTarget;let a;i&&(a=s[`${i}Target`]);const o=(e==null?void 0:e.element)||a||s.element;if(!(o instanceof HTMLElement||o instanceof SVGElement))return;const c=o.dataset,f=parseInt(c.leaveAfter||"")||e.leaveAfter||0,{transitioned:h,hiddenClass:u,preserveOriginalClass:l,removeToClasses:m}=Object.assign(Zs,e),v=(t=s.enter)===null||t===void 0?void 0:t.bind(s),O=(n=s.leave)===null||n===void 0?void 0:n.bind(s),P=(r=s.toggleTransition)===null||r===void 0?void 0:r.bind(s);async function A(p){if(s.transitioned)return;s.transitioned=!0,v&&v(p);const d=V("enterFrom",e,c),S=V("enterActive",e,c),g=V("enterTo",e,c),T=V("leaveTo",e,c);u&&o.classList.remove(u),m||w(o,T),await D(o,d,S,g,u,l,m),f>0&&setTimeout(()=>{k(p)},f)}async function k(p){if(!s.transitioned)return;s.transitioned=!1,O&&O(p);const d=V("leaveFrom",e,c),S=V("leaveActive",e,c),g=V("leaveTo",e,c),T=V("enterTo",e,c);m||w(o,T),await D(o,d,S,g,u,l,m),u&&o.classList.add(u)}function K(p){P&&P(p),s.transitioned?k():A()}async function D(p,d,S,g,T,N,he){const q=[];N&&(d.forEach(F=>p.classList.contains(F)&&F!==T&&q.push(F)),S.forEach(F=>p.classList.contains(F)&&F!==T&&q.push(F)),g.forEach(F=>p.classList.contains(F)&&F!==T&&q.push(F))),B(p,d),w(p,q),B(p,S),await en(),w(p,d),B(p,g),await Ys(p),w(p,S),he&&w(p,g),B(p,q)}function M(){s.transitioned=h,h?(u&&o.classList.remove(u),A()):(u&&o.classList.add(u),k())}function B(p,d){d.length>0&&p.classList.add(...d)}function w(p,d){d.length>0&&p.classList.remove(...d)}return M(),Object.assign(s,{enter:A,leave:k,toggleTransition:K}),[A,k,K]};function V(s,e,t){const n=`transition${s[0].toUpperCase()}${s.substr(1)}`,r=Xs[s],i=e[s]||t[n]||t[r]||" ";return tn(i)?[]:i.split(" ")}async function Ys(s){return new Promise(e=>{const t=Number(getComputedStyle(s).transitionDuration.split(",")[0].replace("s",""))*1e3;setTimeout(()=>{e(t)},t)})}async function en(){return new Promise(s=>{requestAnimationFrame(()=>{requestAnimationFrame(s)})})}function tn(s){return s.length===0||!s.trim()}class sn extends L{constructor(){super(...arguments),this.transitioned=!1}}class nn extends sn{constructor(e){super(e),requestAnimationFrame(()=>{Qs(this,this.options)})}}class rn extends L{connect(){this.isDarkMode=document.documentElement.classList.contains("dark")}toggle(){const e=this.isDarkMode?"dark":"light",t=this.isDarkMode?"light":"dark";document.documentElement.classList.add(t),document.documentElement.classList.remove(e),document.documentElement.style.setProperty("color-scheme",t),this.isDarkMode=!this.isDarkMode,window.localStorage.setItem("color-mode",t)}}function on(s,e){s.indexOf(e)===-1&&s.push(e)}const at=(s,e,t)=>Math.min(Math.max(t,s),e),C={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},ae=s=>typeof s=="number",U=s=>Array.isArray(s)&&!ae(s[0]),an=(s,e,t)=>{const n=e-s;return((t-s)%n+n)%n+s};function cn(s,e){return U(s)?s[an(0,s.length,e)]:s}const ct=(s,e,t)=>-t*s+t*e+s,lt=()=>{},I=s=>s,ke=(s,e,t)=>e-s===0?1:(t-s)/(e-s);function ut(s,e){const t=s[s.length-1];for(let n=1;n<=e;n++){const r=ke(0,e,n);s.push(ct(t,1,r))}}function ln(s){const e=[0];return ut(e,s-1),e}function un(s,e=ln(s.length),t=I){const n=s.length,r=n-e.length;return r>0&&ut(e,r),i=>{let a=0;for(;a<n-2&&!(i<e[a+1]);a++);let o=at(0,1,ke(e[a],e[a+1],i));return o=cn(t,a)(o),ct(s[a],s[a+1],o)}}const ht=s=>Array.isArray(s)&&ae(s[0]),we=s=>typeof s=="object"&&!!s.createAnimation,z=s=>typeof s=="function",hn=s=>typeof s=="string",G={ms:s=>s*1e3,s:s=>s/1e3},dt=(s,e,t)=>(((1-3*t+3*e)*s+(3*t-6*e))*s+3*e)*s,dn=1e-7,fn=12;function pn(s,e,t,n,r){let i,a,o=0;do a=e+(t-e)/2,i=dt(a,n,r)-s,i>0?t=a:e=a;while(Math.abs(i)>dn&&++o<fn);return a}function H(s,e,t,n){if(s===e&&t===n)return I;const r=i=>pn(i,0,1,s,t);return i=>i===0||i===1?i:dt(r(i),e,n)}const gn=(s,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const n=t*s,r=e==="end"?Math.floor(n):Math.ceil(n);return at(0,1,r/s)},Re={ease:H(.25,.1,.25,1),"ease-in":H(.42,0,1,1),"ease-in-out":H(.42,0,.58,1),"ease-out":H(0,0,.58,1)},mn=/\((.*?)\)/;function Ue(s){if(z(s))return s;if(ht(s))return H(...s);if(Re[s])return Re[s];if(s.startsWith("steps")){const e=mn.exec(s);if(e){const t=e[1].split(",");return gn(parseFloat(t[0]),t[1].trim())}}return I}class ft{constructor(e,t=[0,1],{easing:n,duration:r=C.duration,delay:i=C.delay,endDelay:a=C.endDelay,repeat:o=C.repeat,offset:c,direction:f="normal",autoplay:h=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=I,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((l,m)=>{this.resolve=l,this.reject=m}),n=n||C.easing,we(n)){const l=n.createAnimation(t);n=l.easing,t=l.keyframes||t,r=l.duration||r}this.repeat=o,this.easing=U(n)?I:Ue(n),this.updateDuration(r);const u=un(t,c,U(n)?n.map(Ue):I);this.tick=l=>{var m;i=i;let v=0;this.pauseTime!==void 0?v=this.pauseTime:v=(l-this.startTime)*this.rate,this.t=v,v/=1e3,v=Math.max(v-i,0),this.playState==="finished"&&this.pauseTime===void 0&&(v=this.totalDuration);const O=v/this.duration;let P=Math.floor(O),A=O%1;!A&&O>=1&&(A=1),A===1&&P--;const k=P%2;(f==="reverse"||f==="alternate"&&k||f==="alternate-reverse"&&!k)&&(A=1-A);const K=v>=this.totalDuration?1:Math.min(A,1),D=u(this.easing(K));e(D),this.pauseTime===void 0&&(this.playState==="finished"||v>=this.totalDuration+a)?(this.playState="finished",(m=this.resolve)===null||m===void 0||m.call(this,D)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},h&&this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}class yn{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const ge=new WeakMap;function pt(s){return ge.has(s)||ge.set(s,{transforms:[],values:new Map}),ge.get(s)}function bn(s,e){return s.has(e)||s.set(e,new yn),s.get(e)}const vn=["","X","Y","Z"],On=["translate","scale","rotate","skew"],ce={x:"translateX",y:"translateY",z:"translateZ"},ze={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:s=>s+"deg"},En={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:s=>s+"px"},rotate:ze,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:I},skew:ze},Y=new Map,Se=s=>`--motion-${s}`,le=["x","y","z"];On.forEach(s=>{vn.forEach(e=>{le.push(s+e),Y.set(Se(s+e),En[s])})});const wn=(s,e)=>le.indexOf(s)-le.indexOf(e),An=new Set(le),gt=s=>An.has(s),Mn=(s,e)=>{ce[e]&&(e=ce[e]);const{transforms:t}=pt(s);on(t,e),s.style.transform=Tn(t)},Tn=s=>s.sort(wn).reduce(Cn,"").trim(),Cn=(s,e)=>`${s} ${e}(var(${Se(e)}))`,Ae=s=>s.startsWith("--"),qe=new Set;function Fn(s){if(!qe.has(s)){qe.add(s);try{const{syntax:e,initialValue:t}=Y.has(s)?Y.get(s):{};CSS.registerProperty({name:s,inherits:!1,syntax:e,initialValue:t})}catch{}}}const me=(s,e)=>document.createElement("div").animate(s,e),We={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{me({opacity:[1]})}catch{return!1}return!0},finished:()=>!!me({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{me({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},ye={},R={};for(const s in We)R[s]=()=>(ye[s]===void 0&&(ye[s]=We[s]()),ye[s]);const kn=.015,Sn=(s,e)=>{let t="";const n=Math.round(e/kn);for(let r=0;r<n;r++)t+=s(ke(0,n-1,r))+", ";return t.substring(0,t.length-2)},He=(s,e)=>z(s)?R.linearEasing()?`linear(${Sn(s,e)})`:C.easing:ht(s)?xn(s):s,xn=([s,e,t,n])=>`cubic-bezier(${s}, ${e}, ${t}, ${n})`;function Ln(s,e){for(let t=0;t<s.length;t++)s[t]===null&&(s[t]=t?s[t-1]:e());return s}const Dn=s=>Array.isArray(s)?s:[s];function Me(s){return ce[s]&&(s=ce[s]),gt(s)?Se(s):s}const ie={get:(s,e)=>{e=Me(e);let t=Ae(e)?s.style.getPropertyValue(e):getComputedStyle(s)[e];if(!t&&t!==0){const n=Y.get(e);n&&(t=n.initialValue)}return t},set:(s,e,t)=>{e=Me(e),Ae(e)?s.style.setProperty(e,t):s.style[e]=t}};function mt(s,e=!0){if(!(!s||s.playState==="finished"))try{s.stop?s.stop():(e&&s.commitStyles(),s.cancel())}catch{}}function Bn(s,e){var t;let n=(e==null?void 0:e.toDefaultUnit)||I;const r=s[s.length-1];if(hn(r)){const i=((t=r.match(/(-?[\d.]+)([a-z%]*)/))===null||t===void 0?void 0:t[2])||"";i&&(n=a=>a+i)}return n}function Nn(){return window.__MOTION_DEV_TOOLS_RECORD}function $n(s,e,t,n={},r){const i=Nn(),a=n.record!==!1&&i;let o,{duration:c=C.duration,delay:f=C.delay,endDelay:h=C.endDelay,repeat:u=C.repeat,easing:l=C.easing,persist:m=!1,direction:v,offset:O,allowWebkitAcceleration:P=!1,autoplay:A=!0}=n;const k=pt(s),K=gt(e);let D=R.waapi();K&&Mn(s,e);const M=Me(e),B=bn(k.values,M),w=Y.get(M);return mt(B.animation,!(we(l)&&B.generator)&&n.record!==!1),()=>{const p=()=>{var g,T;return(T=(g=ie.get(s,M))!==null&&g!==void 0?g:w==null?void 0:w.initialValue)!==null&&T!==void 0?T:0};let d=Ln(Dn(t),p);const S=Bn(d,w);if(we(l)){const g=l.createAnimation(d,e!=="opacity",p,M,B);l=g.easing,d=g.keyframes||d,c=g.duration||c}if(Ae(M)&&(R.cssRegisterProperty()?Fn(M):D=!1),K&&!R.linearEasing()&&(z(l)||U(l)&&l.some(z))&&(D=!1),D){w&&(d=d.map(N=>ae(N)?w.toDefaultUnit(N):N)),d.length===1&&(!R.partialKeyframes()||a)&&d.unshift(p());const g={delay:G.ms(f),duration:G.ms(c),endDelay:G.ms(h),easing:U(l)?void 0:He(l,c),direction:v,iterations:u+1,fill:"both"};o=s.animate({[M]:d,offset:O,easing:U(l)?l.map(N=>He(N,c)):void 0},g),o.finished||(o.finished=new Promise((N,he)=>{o.onfinish=N,o.oncancel=he}));const T=d[d.length-1];o.finished.then(()=>{m||(ie.set(s,M,T),o.cancel())}).catch(lt),P||(o.playbackRate=1.000001)}else if(r&&K)d=d.map(g=>typeof g=="string"?parseFloat(g):g),d.length===1&&d.unshift(parseFloat(p())),o=new r(g=>{ie.set(s,M,S?S(g):g)},d,Object.assign(Object.assign({},n),{duration:c,easing:l}));else{const g=d[d.length-1];ie.set(s,M,w&&ae(g)?w.toDefaultUnit(g):g)}return a&&i(s,e,d,{duration:c,delay:f,easing:l,repeat:u,offset:O},"motion-one"),B.setAnimation(o),o&&!A&&o.pause(),o}}const Kn=(s,e)=>s[e]?Object.assign(Object.assign({},s),s[e]):Object.assign({},s);function Vn(s,e){var t;return typeof s=="string"?e?((t=e[s])!==null&&t!==void 0||(e[s]=document.querySelectorAll(s)),s=e[s]):s=document.querySelectorAll(s):s instanceof Element&&(s=[s]),Array.from(s||[])}const jn=s=>s(),yt=(s,e,t=C.duration)=>new Proxy({animations:s.map(jn).filter(Boolean),duration:t,options:e},Pn),In=s=>s.animations[0],Pn={get:(s,e)=>{const t=In(s);switch(e){case"duration":return s.duration;case"currentTime":return G.s((t==null?void 0:t[e])||0);case"playbackRate":case"playState":return t==null?void 0:t[e];case"finished":return s.finished||(s.finished=Promise.all(s.animations.map(_n)).catch(lt)),s.finished;case"stop":return()=>{s.animations.forEach(n=>mt(n))};case"forEachNative":return n=>{s.animations.forEach(r=>n(r,s))};default:return typeof(t==null?void 0:t[e])>"u"?void 0:()=>s.animations.forEach(n=>n[e]())}},set:(s,e,t)=>{switch(e){case"currentTime":t=G.ms(t);case"playbackRate":for(let n=0;n<s.animations.length;n++)s.animations[n][e]=t;return!0}return!1}},_n=s=>s.finished;function Rn(s,e,t){return z(s)?s(e,t):s}function Un(s){return function(t,n,r={}){t=Vn(t);const i=t.length,a=[];for(let o=0;o<i;o++){const c=t[o];for(const f in n){const h=Kn(r,f);h.delay=Rn(h.delay,o,i);const u=$n(c,f,n[f],h,s);a.push(u)}}return yt(a,r,r.duration)}}const zn=Un(ft);function qn(s,e={}){return yt([()=>{const t=new ft(s,[0,1],e);return t.finished.catch(()=>{}),t}],e,e.duration)}function Wn(s,e,t){return(z(s)?qn:zn)(s,e,t)}class bt extends L{connect(){this.animateKeyFrames=JSON.parse(this.data.get("animate")||"null"),this.activeTabClasses=(this.data.get("activeTab")||"active").split(" "),this.inactiveTabClasses=(this.data.get("inactiveTab")||"inactive").split(" "),this.anchor&&(this.index=this.tabTargets.findIndex(e=>e.id===this.anchor),this.showTab())}change(e){e.preventDefault(),e.currentTarget.dataset.index?this.index=e.currentTarget.dataset.index:e.currentTarget.dataset.id?this.index=this.tabTargets.findIndex(t=>t.id==e.currentTarget.dataset.id):this.index=this.tabTargets.indexOf(e.currentTarget),window.dispatchEvent(new CustomEvent("tsc:tab-change"))}showTab(){this.tabTargets.forEach((e,t)=>{const n=this.panelTargets[t];t===this.index?(n!==void 0&&(n.classList.remove("!hidden"),this.animateKeyFrames!==null&&Wn(n,this.animateKeyFrames,{duration:.5})),e.classList.remove(...this.inactiveTabClasses),e.classList.add(...this.activeTabClasses),e.id&&history.replaceState({},"","#"+e.id)):(n!==void 0&&n.classList.add("!hidden"),e.classList.remove(...this.activeTabClasses),e.classList.add(...this.inactiveTabClasses))})}get index(){return parseInt(this.data.get("index")||0)}set index(e){this.data.set("index",e>=0?e:0),this.showTab()}get anchor(){return document.URL.split("#").length>1?document.URL.split("#")[1]:null}}xe(bt,"targets",["tab","panel"]);const ue=ps.start();ue.register("transition",nn);ue.register("click-outside",Hs);ue.register("mode-switch",rn);ue.register("tabs",bt);
